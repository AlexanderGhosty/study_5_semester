# Лабораторная работа №4 - Обработка исключений

## Описание

Четвертая лабораторная работа демонстрирует различные подходы к обработке исключений в Python, включая создание пользовательских исключений и их использование в реальных сценариях.

## Структура проекта

```
l4/
├── main.py               # Основной файл с демонстрацией всех сценариев
├── app/                  # Пакет приложения
│   ├── __init__.py
│   ├── exceptions.py     # Пользовательские исключения
│   ├── validators.py     # Функции валидации с обработкой ошибок
│   ├── services.py       # Сервисные функции с различными типами обработки
│   └── io_utils.py       # Утилиты ввода-вывода
└── README.md            # Документация (этот файл)
```

## Функциональность

### 1. Пользовательские исключения (`exceptions.py`)
- `CartEmptyError` - исключение для пустой корзины
- `OutOfBudgetError` - исключение при превышении бюджета  
- `ReportFormatError` - исключение неверного формата файла

### 2. Валидаторы (`validators.py`)
- Функции без обработчиков исключений
- Функции с одним обработчиком `Exception`
- Функции с блоком `finally`
- Функции с несколькими обработчиками разных типов

### 3. Сервисы (`services.py`)
- Обработка различных типов исключений:
  - `KeyError` - отсутствующий ключ
  - `ValueError` - неверное значение
  - `RuntimeError` - ошибка времени выполнения
  - `LookupError` - ошибка поиска
  - `OverflowError` - переполнение
  - `ConnectionError` - сетевые ошибки
- Функции, генерирующие и обрабатывающие собственные исключения

### 4. Утилиты ввода-вывода (`io_utils.py`)
- Безопасное чтение файлов
- Парсинг данных с обработкой ошибок
- Математические операции с проверкой деления на ноль

## Демонстрируемые сценарии

### Шаг 1: Функции без обработчиков
Базовые функции валидации, которые могут выбрасывать исключения.

### Шаг 2: Один обработчик Exception  
Функции с универсальной обработкой любых исключений.

### Шаг 3: Обработчик + finally
Функции с гарантированным выполнением блока `finally`.

### Шаг 4: Несколько обработчиков
Функции с специализированной обработкой разных типов исключений.

### Шаг 5: Самостоятельная генерация и обработка
Функции, которые сами генерируют исключения и сами их обрабатывают.

### Шаг 6-7: Пользовательские исключения
Создание и использование собственных классов исключений.

### Шаг 8: Дополнительные утилиты
Полезные функции с комплексной обработкой ошибок.

## Запуск

```bash
python main.py
```

## Пример вывода

```
== Шаг 1: функции без обработчиков ==
validate_quantity(5) -> 5
validate_sku('ABC-001') -> ABC-001

== Шаг 2: один обработчик Exception ==
[normalize_prices] Ошибка нормализации: could not convert string to float: 'x'. 
normalize_prices(['10', 'x', -5, 2.5]) -> [10.0]

== Шаг 4: несколько обработчиков разных типов ==
[reserve_stock] Нет такого товара: 'SKU NO-SUCH not found'. 
stock после операций -> {'ABC-001': 3, 'XYZ-777': 1, 'NO-SUCH': 0}

== Шаг 6/7: пользовательские исключения ==
[checkout] Заказ оформлен на сумму 1019.0.
[checkout] Корзина пуста. Предлагаю каталог.
[checkout] Недостаточно средств: Сумма 1019.0 превышает бюджет 500.

Все демо-вызовы завершены без необработанных исключений.
```

## Цель работы

- Освоить различные подходы к обработке исключений в Python
- Научиться создавать пользовательские исключения
- Понять разницу между различными типами встроенных исключений
- Освоить использование блоков `try-except-finally`
- Изучить best practices обработки ошибок в реальных приложениях
- Научиться писать отказоустойчивый код
- Понять принципы graceful degradation при ошибках